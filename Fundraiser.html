<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fundraiser | Crowdfunding</title>
</head>

<body>
    <div class="Nav"></div>
        <div class="right-nav">
            <a href="homepage">HOME</a>
            <a href="news.html">NEWS</a>
            <a href="aboutus.html">ABOUT US</a>
            <a href="searchfundraiser"> SEARCH </a>
        </div>
        <div class="left-nav">
            <a href="login.html">LOGIN</a>
            <a href="register.html">REGISTER</a>
        </div>
    </div>

    <div class="content">
        <h1>Fundraiser Details</h1>
        <div class="fundraiser-details" id="fundraiserDetails"></div>
        <button class="donate" onclick="showDonateMessage()">Donate</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const urlParams = new URLSearchParams(window.location.search);
            const fundraiserId = urlParams.get('id');
    
            if (!fundraiserId) {
                document.getElementById('fundraiserDetails').innerHTML = '<p>No fundraiser selected.</p>';
                return;
            }
    
            fetch(`/api/fundraiser/${fundraiserId}`)
                .then(response => response.json())
                .then(fundraiser => {
                    const detailsDiv = document.getElementById('fundraiserDetails');
                    detailsDiv.innerHTML = `
                        <h2>${fundraiser.CAPTION}</h2>
                        <p><strong>Organiser:</strong> ${fundraiser.ORGANISER}</p>
                        <p><strong>City:</strong> ${fundraiser.CITY}</p>
                        <p><strong>Category:</strong> ${fundraiser.CATEGORY_NAME}</p>
                        <p><strong>Target Funding:</strong> $${fundraiser.TARGET_FUNDING}</p>
                        <p><strong>Current Funding:</strong> $${fundraiser.CURRENT_FUNDING}</p>
                    `;
                })
                .catch(error => {
                    console.error('Error fetching fundraiser details:', error);
                    document.getElementById('fundraiserDetails').innerHTML = '<p>Error loading details.</p>';
                });
        });
    
        function showDonateMessage() {
            alert('This feature is under construction');
        }
    </script>
    

    <div class="footer">
        <div class="support">
            <a href="accessibility.html">ACCESSIBILITY</a>
            <a href="contact.html">CONTACT</a>
            <a href="help.html">HELP</a>
            <a href="sitemap.html">SITEMAP</a>
        </div>
        <div class="wrapper">
            <p>&copy; 2024 Crowdfund. All rights reserved.</p>
            <p>
                <a href="terms.html">TERMS AND CONDITIONS</a> | 
                <a href="Privacy.html">PRIVACY POLICY</a> 
            </p>
        </div>
    </div>   
</body>
</html>